#pragma checksum "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "abb174226f0b219547cf6d46c510c5677124268e"
// <auto-generated/>
#pragma warning disable 1591
namespace Radzen.Blazor.Rendering
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "D:\c#\radzen-blazor\Radzen.Blazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 1 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
using Radzen.Blazor;

#line default
#line hidden
#line 2 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
using Radzen.Blazor.Rendering;

#line default
#line hidden
    public partial class GaugeScale : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "g");
            __builder.AddAttribute(1, "class", "rz-line");
            __builder.AddMarkupContent(2, "\n    ");
            __builder.OpenComponent<Radzen.Blazor.Rendering.Path>(3);
            __builder.AddAttribute(4, "D", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 5 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
             Path

#line default
#line hidden
            ));
            __builder.AddAttribute(5, "Stroke", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 5 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                          Stroke

#line default
#line hidden
            ));
            __builder.AddAttribute(6, "StrokeWidth", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#line 5 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                              StrokeWidth

#line default
#line hidden
            ));
            __builder.AddAttribute(7, "Fill", "none");
            __builder.AddAttribute(8, "Class", "rz-scale-line");
            __builder.CloseComponent();
            __builder.AddMarkupContent(9, "\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(10, "\n");
#line 7 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
 foreach (var tick in Ticks)
{

#line default
#line hidden
            __builder.AddContent(11, "    ");
            __builder.OpenElement(12, "g");
            __builder.AddAttribute(13, "class", "rz-tick");
            __builder.AddMarkupContent(14, "\n        ");
            __builder.OpenComponent<Radzen.Blazor.Rendering.Path>(15);
            __builder.AddAttribute(16, "Class", "rz-tick-line");
            __builder.AddAttribute(17, "D", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 10 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                      tick.Path

#line default
#line hidden
            ));
            __builder.AddAttribute(18, "Stroke", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 10 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                                        Stroke

#line default
#line hidden
            ));
            __builder.AddAttribute(19, "StrokeWidth", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#line 10 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                                                            StrokeWidth

#line default
#line hidden
            ));
            __builder.AddAttribute(20, "Fill", "none");
            __builder.CloseComponent();
            __builder.AddMarkupContent(21, "\n        if (!string.IsNullOrEmpty(tick.Value))\n        {\n            ");
            __builder.OpenComponent<Radzen.Blazor.Rendering.Text>(22);
            __builder.AddAttribute(23, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 13 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                         tick.Value

#line default
#line hidden
            ));
            __builder.AddAttribute(24, "Class", "rz-tick-text");
            __builder.AddAttribute(25, "Position", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Radzen.Blazor.Point>(
#line 13 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                                                   tick.Text

#line default
#line hidden
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(26, "\n        }\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(27, "\n");
#line 16 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
}

#line default
#line hidden
#line 17 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
 foreach (var tick in MinorTicks)
{

#line default
#line hidden
            __builder.AddContent(28, "    ");
            __builder.OpenElement(29, "g");
            __builder.AddAttribute(30, "class", "rz-tick rz-minor-tick");
            __builder.AddMarkupContent(31, "\n        ");
            __builder.OpenComponent<Radzen.Blazor.Rendering.Path>(32);
            __builder.AddAttribute(33, "Class", "rz-tick-line");
            __builder.AddAttribute(34, "D", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 20 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                      tick.Path

#line default
#line hidden
            ));
            __builder.AddAttribute(35, "Stroke", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 20 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                                        Stroke

#line default
#line hidden
            ));
            __builder.AddAttribute(36, "StrokeWidth", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#line 20 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
                                                                            StrokeWidth

#line default
#line hidden
            ));
            __builder.AddAttribute(37, "Fill", "none");
            __builder.CloseComponent();
            __builder.AddMarkupContent(38, "\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(39, "\n");
#line 22 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
}

#line default
#line hidden
        }
        #pragma warning restore 1998
#line 24 "D:\c#\radzen-blazor\Radzen.Blazor\Rendering\GaugeScale.razor"
       
    [Parameter]
    public double StartAngle { get; set; }

    [Parameter]
    public string Stroke { get; set; }

    [Parameter]
    public double StrokeWidth { get; set; }

    [Parameter]
    public double TickLength { get; set; }

    [Parameter]
    public double MinorTickLength { get; set; }

    [Parameter]
    public double TickLabelOffset { get; set; }

    [Parameter]
    public double EndAngle { get; set; }

    [Parameter]
    public double Radius { get; set; }

    [Parameter]
    public Point Center { get; set; }

    [Parameter]
    public double Min { get; set; }

    [Parameter]
    public double Max { get; set; }

    [Parameter]
    public bool ShowFirstTick { get; set; }

    [Parameter]
    public bool ShowLastTick { get; set; }

    [Parameter]
    public bool ShowTickLabels { get; set; }

    [Parameter]
    public GaugeTickPosition TickPosition { get; set; }

    [Parameter]
    public string FormatString { get; set; }

    [Parameter]
    public Func<double, string> Formatter { get; set; }

    [Parameter]
    public double Step { get; set; }

    [Parameter]
    public double MinorStep { get; set; }

    private string Path { get; set; }

    class Tick
    {
        public Point Start { get; set; }
        public Point End { get; set; }
        public Point Text { get; set; }

        public string Value { get; set; }
        public string Path
        {
            get
            {
                return $"M {Start.Render()} L {End.Render()}";
            }
        }
    }

    private IList<Tick> Ticks { get; set; }
    private IList<Tick> MinorTicks { get; set; }

    protected override void OnParametersSet()
    {
        var startAngle = Polar.ToRadian(StartAngle - 90);
        var start = Center.ToCartesian(Radius, startAngle);

        var endAngle = Polar.ToRadian(EndAngle - 90);

        var end = Center.ToCartesian(Radius, endAngle);

        var sweep = EndAngle - StartAngle <= 180 ? 0 : 1;

        if (Math.Abs(end.X - start.X) < 0.01 && Math.Abs(end.Y - start.Y) < 0.01)
        {
            // Full circle - SVG can't render a full circle arc 
            end.X = end.X - 0.01;
        }

        Path = $"M {start.Render()} A {Radius.ToInvariantString()} {Radius.ToInvariantString()} 0 {sweep} 1 {end.Render()}";

        Ticks = new List<Tick>();
        MinorTicks = new List<Tick>();

        if (TickPosition != GaugeTickPosition.None)
        {
            var count = Math.Floor((Max - Min) / Step);
            var step = Polar.ToRadian(EndAngle - StartAngle) / count;
            var angle = startAngle;
            var value = Min;

            for (var idx = 0; idx <= count; idx++)
            {
                var tick = new Tick();

                if (ShowTickLabels)
                {
                    if (!string.IsNullOrEmpty(FormatString))
                    {
                        tick.Value = string.Format(FormatString, value);
                    }
                    else
                    {
                        tick.Value = Formatter(value);
                    }
                }

                if (TickPosition == GaugeTickPosition.Outside)
                {
                    tick.Start = Center.ToCartesian(Radius, angle);
                    tick.End = Center.ToCartesian(Radius + TickLength, angle);
                    tick.Text = Center.ToCartesian(Radius + TickLabelOffset, angle);
                }

                if (TickPosition == GaugeTickPosition.Inside)
                {
                    tick.Start = Center.ToCartesian(Radius - TickLength, angle);
                    tick.End = Center.ToCartesian(Radius, angle);
                    tick.Text = Center.ToCartesian(Radius - TickLabelOffset, angle);
                }

                angle += step;
                value += Step;

                if (idx == 0 && ShowFirstTick == false)
                {
                    continue;
                }

                if (idx == count && ShowLastTick == false)
                {
                    continue;
                }

                Ticks.Add(tick);
            }

            if (MinorStep > 0)
            {
                var minorCount = Math.Floor((Max - Min) / MinorStep);
                var minorStep = Polar.ToRadian(EndAngle - StartAngle) / minorCount;
                var minorAngle = startAngle;

                for (var idx = 0; idx <= minorCount; idx++)
                {
                    var tick = new Tick();

                    if (TickPosition == GaugeTickPosition.Outside)
                    {
                        tick.Start = Center.ToCartesian(Radius, minorAngle);
                        tick.End = Center.ToCartesian(Radius + MinorTickLength, minorAngle);
                    }

                    if (TickPosition == GaugeTickPosition.Inside)
                    {
                        tick.Start = Center.ToCartesian(Radius - MinorTickLength, minorAngle);
                        tick.End = Center.ToCartesian(Radius, minorAngle);
                    }

                    minorAngle += minorStep;

                    if (idx % (Step / MinorStep) == 0)
                    {
                        continue;
                    }

                    MinorTicks.Add(tick);
                }
            }
        }
    }

#line default
#line hidden
    }
}
#pragma warning restore 1591
